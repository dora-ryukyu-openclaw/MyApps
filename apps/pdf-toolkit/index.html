<!DOCTYPE html>
<html lang="ja" data-theme="system">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Toolkit — MyApps</title>
    <meta name="description" content="完全ローカルでPDFの結合・ページ抽出・回転ができるユーティリティ。サーバー不要、情報漏洩リスクゼロ。">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="../../shared/base.css">
    <link rel="stylesheet" href="../../shared/header.css">
    <link rel="stylesheet" href="style.css">
    <script>document.documentElement.setAttribute('data-theme', localStorage.getItem('myapps-theme') || 'system');</script>
</head>

<body>
    <main class="app-main">
        <!-- モードタブ -->
        <nav class="mode-tabs" role="tablist" aria-label="操作モード選択">
            <button class="mode-tab active" role="tab" aria-selected="true" aria-controls="panel-merge"
                data-mode="merge" id="tab-merge" type="button">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M8 6h13" />
                    <path d="M8 12h13" />
                    <path d="M8 18h13" />
                    <path d="M3 6h.01" />
                    <path d="M3 12h.01" />
                    <path d="M3 18h.01" />
                </svg>
                結合
            </button>
            <button class="mode-tab" role="tab" aria-selected="false" aria-controls="panel-extract" data-mode="extract"
                id="tab-extract" type="button">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" />
                    <path d="M14 2v4a2 2 0 0 0 2 2h4" />
                    <path d="M12 18v-6" />
                    <path d="m9 15 3 3 3-3" />
                </svg>
                抽出
            </button>
            <button class="mode-tab" role="tab" aria-selected="false" aria-controls="panel-rotate" data-mode="rotate"
                id="tab-rotate" type="button">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
                    <path d="M21 3v5h-5" />
                </svg>
                回転
            </button>
        </nav>

        <!-- ========== 結合パネル ========== -->
        <section class="mode-panel active" id="panel-merge" role="tabpanel" aria-labelledby="tab-merge">
            <input type="file" id="merge-file-input" accept=".pdf" multiple hidden>
            <div class="drop-zone" id="merge-drop">
                <div class="drop-zone-content">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" x2="12" y1="3" y2="15" />
                    </svg>
                    <p class="drop-zone-text">PDF ファイルをドラッグ＆ドロップ</p>
                    <p class="drop-zone-hint">または</p>
                    <button class="btn-file" type="button">ファイルを選択</button>
                </div>
            </div>
            <div class="file-list" id="merge-list" role="list" aria-label="結合するファイル一覧"></div>
            <div class="action-bar" id="merge-actions" style="display:none;">
                <div class="action-bar-left">
                    <span class="file-count" id="merge-count"></span>
                    <button class="btn-secondary btn-sm" id="merge-add-more" type="button" title="ファイルを追加">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M5 12h14" />
                            <path d="M12 5v14" />
                        </svg>
                        追加
                    </button>
                    <button class="btn-secondary btn-sm" id="merge-sort-num" type="button" title="ファイル名の数字順にソート">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="m3 8 4-4 4 4" />
                            <path d="M7 4v16" />
                            <path d="M11 12h4" />
                            <path d="M11 16h7" />
                            <path d="M11 20h10" />
                        </svg>
                        数字順
                    </button>
                    <button class="btn-secondary btn-sm" id="merge-reverse" type="button" title="順番を逆転">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="m3 16 4 4 4-4" />
                            <path d="M7 20V4" />
                            <path d="m21 8-4-4-4 4" />
                            <path d="M17 4v16" />
                        </svg>
                        逆順
                    </button>
                </div>
                <div class="action-bar-right">
                    <button class="btn-secondary" id="merge-clear" type="button">クリア</button>
                    <button class="btn-primary" id="merge-download" type="button">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" x2="12" y1="15" y2="3" />
                        </svg>
                        結合してダウンロード
                    </button>
                </div>
            </div>
        </section>

        <!-- ========== 抽出パネル ========== -->
        <section class="mode-panel" id="panel-extract" role="tabpanel" aria-labelledby="tab-extract" hidden>
            <input type="file" id="extract-file-input" accept=".pdf" hidden>
            <div class="drop-zone" id="extract-drop">
                <div class="drop-zone-content">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" x2="12" y1="3" y2="15" />
                    </svg>
                    <p class="drop-zone-text">PDF ファイルをドラッグ＆ドロップ</p>
                    <p class="drop-zone-hint">または</p>
                    <button class="btn-file" type="button">ファイルを選択</button>
                </div>
            </div>
            <div class="extract-controls" id="extract-controls" style="display:none;">
                <div class="loaded-file-info" id="extract-file-info"></div>
                <div class="page-range-input">
                    <label for="extract-pages" class="input-label">抽出するページ</label>
                    <input type="text" id="extract-pages" class="text-input" placeholder="例: 1, 3, 5-10">
                    <p class="input-hint">カンマ区切りでページ番号、ハイフンで範囲を指定</p>
                </div>
                <div class="action-bar">
                    <button class="btn-secondary" id="extract-reset" type="button">リセット</button>
                    <button class="btn-primary" id="extract-download" type="button">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" x2="12" y1="15" y2="3" />
                        </svg>
                        抽出してダウンロード
                    </button>
                </div>
            </div>
        </section>

        <!-- ========== 回転パネル ========== -->
        <section class="mode-panel" id="panel-rotate" role="tabpanel" aria-labelledby="tab-rotate" hidden>
            <input type="file" id="rotate-file-input" accept=".pdf" hidden>
            <div class="drop-zone" id="rotate-drop">
                <div class="drop-zone-content">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" x2="12" y1="3" y2="15" />
                    </svg>
                    <p class="drop-zone-text">PDF ファイルをドラッグ＆ドロップ</p>
                    <p class="drop-zone-hint">または</p>
                    <button class="btn-file" type="button">ファイルを選択</button>
                </div>
            </div>
            <div class="rotate-controls" id="rotate-controls" style="display:none;">
                <div class="rotate-toolbar">
                    <div class="loaded-file-info" id="rotate-file-info"></div>
                    <div class="rotate-toolbar-actions">
                        <button class="btn-secondary btn-sm" id="rotate-all-cw" type="button" title="全ページ右回転">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
                                <path d="M21 3v5h-5" />
                            </svg>
                            全ページ +90°
                        </button>
                    </div>
                </div>
                <div class="page-grid" id="rotate-grid" role="list" aria-label="ページ一覧"></div>
                <div class="action-bar">
                    <button class="btn-secondary" id="rotate-reset" type="button">リセット</button>
                    <button class="btn-primary" id="rotate-download" type="button">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" x2="12" y1="15" y2="3" />
                        </svg>
                        回転してダウンロード
                    </button>
                </div>
            </div>
        </section>

        <!-- トースト -->
        <div class="toast" id="toast" role="status" aria-live="polite"></div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="../../shared/header.js" data-app-name="PDF Toolkit" data-app-icon="file-stack"
        data-app-color="#e11d48"></script>
    <script src="script.js"></script>
</body>

</html>