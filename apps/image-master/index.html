<!DOCTYPE html>
<html lang="ja" data-theme="system">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画像加工マスター — MyApps</title>
    <meta name="description" content="ブラウザ完結で画像のリサイズ、クロップ、形式変換ができる高機能ツール。">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="../../shared/base.css">
    <link rel="stylesheet" href="../../shared/header.css">
    <link rel="stylesheet" href="style.css">
    <script>
        document.documentElement.setAttribute('data-theme', localStorage.getItem('myapps-theme') || 'system');
    </script>
</head>
<body>
    <main class="app-main">
        <div class="editor-layout">
            <div class="canvas-container card glass">
                <div id="drop-zone" class="drop-zone glass">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
                    <p>画像をドラッグ＆ドロップ、またはクリック</p>
                    <span class="hint">JPG, PNG, WebP (Max 10MB)</span>
                    <input type="file" id="file-input" accept="image/*" hidden>
                </div>
                <canvas id="main-canvas" style="display: none;"></canvas>
            </div>

            <div class="sidebar">
                <!-- 基本設定 -->
                <div class="control-card card glass">
                    <div class="card-title">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.71-2.13 0-2.97a2.1 2.1 0 0 0-2.97 0Z"/><path d="m12 15-3-3"/><path d="m15 12-3-3"/><path d="m8.5 2.5 12.5 12.5"/><path d="m5.5 5.5 12.5 12.5"/><path d="m2.5 8.5 12.5 12.5"/></svg>
                        リサイズ・調整
                    </div>
                    <div class="control-group">
                        <div class="control-item">
                            <label>サイズ指定 (px)</label>
                            <div class="input-row">
                                <input type="number" id="w-px" placeholder="Width">
                                <input type="number" id="h-px" placeholder="Height">
                            </div>
                            <label class="checkbox-label" style="margin-top: var(--sp-2); display: flex; align-items: center; gap: var(--sp-2); font-size: var(--text-xs); color: var(--c-text-3);">
                                <input type="checkbox" id="keep-ratio" checked style="width: 14px; height: 14px;"> アスペクト比を維持
                            </label>
                        </div>
                        <div class="control-item">
                            <label>画質 (JPEG/WebP)</label>
                            <div class="range-wrap">
                                <input type="range" id="quality" min="1" max="100" value="90">
                                <span class="range-val" id="quality-val">90%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- フィルター -->
                <div class="control-card card glass">
                    <div class="card-title">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 11 3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                        フィルター
                    </div>
                    <div class="control-group">
                        <div class="control-item">
                            <label>明るさ</label>
                            <div class="range-wrap">
                                <input type="range" id="f-brightness" min="0" max="200" value="100">
                                <span class="range-val" id="f-brightness-val">100%</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>コントラスト</label>
                            <div class="range-wrap">
                                <input type="range" id="f-contrast" min="0" max="200" value="100">
                                <span class="range-val" id="f-contrast-val">100%</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label>彩度</label>
                            <div class="range-wrap">
                                <input type="range" id="f-saturate" min="0" max="200" value="100">
                                <span class="range-val" id="f-saturate-val">100%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 出力設定 -->
                <div class="control-card card glass">
                    <div class="card-title">出力形式</div>
                    <select id="export-format">
                        <option value="image/png">PNG (.png)</option>
                        <option value="image/jpeg">JPEG (.jpg)</option>
                        <option value="image/webp">WebP (.webp)</option>
                    </select>
                </div>

                <button id="download-btn" class="btn-primary" disabled>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                    ダウンロード
                </button>
            </div>
        </div>
    </main>

    <script src="../../shared/header.js" 
        data-app-name="画像加工マスター" 
        data-app-icon="crop" 
        data-app-color="#ec4899"></script>
    <script src="script.js"></script>
</body>
</html>
